map $request $loggable {
    ~*\.css 0;
    ~*\.js 0;
    ~/status/ 0; 
    default 1;
}

log_format audit '$remote_addr - $remote_user [$time_local] "$request" $status $body_bytes_sent "$http_referer" "$http_user_agent" "$http_x_forwarded_for" user=$upstream_http_x_username';
access_log "/var/log/nginx/audit.log" audit if=$loggable;
